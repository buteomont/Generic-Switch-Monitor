<!DOCTYPE html>
<html>
<head><title>Settings</title><meta charset="UTF-8"></head>
<body>
  <h1>Switch Monitor Device Settings</h1>
  <form action="/save" method="POST">
    <h2>WiFi and Network</h2>
    <table border="0">
      <tr><td>SSID:          </td><td><input name="ssid"          value="%ssid%" onchange="document.getElementById('saveButton').disabled = false;" />    </td><td>The router to which you want to connect          </td></tr>
      <tr><td>WiFi Password: </td><td><input name="wifipass"      value="%wifipass%" onchange="document.getElementById('saveButton').disabled = false;" /></td><td>The password to the router                       </td></tr>
      <tr><td>Static Address:</td><td><input name="address"       value="%address%" onchange="document.getElementById('saveButton').disabled = false;" /> </td><td>Optional. Will use DHCP if empty.                </td></tr>
      <tr><td>Netmask:       </td><td><input name="netmask"       value="%netmask%" onchange="document.getElementById('saveButton').disabled = false;" /> </td><td>Optional. Only needed if static address is used. </td></tr>
      </table>

    <h2>MQTT</h2>
    <table border="0">
      <tr><td>Broker:    </td><td><input name="broker"        value="%broker%" onchange="document.getElementById('saveButton').disabled = false;" />   </td><td>The MQTT broker to which to send the reports.    </td></tr>
      <tr><td>Port:      </td><td><input name="port"          value="%port%" onchange="document.getElementById('saveButton').disabled = false;" />     </td><td>The port of the MQTT broker (usually 1883).      </td></tr>
      <tr><td>Topic Root:</td><td><input name="topicroot"     value="%topicroot%" onchange="document.getElementById('saveButton').disabled = false;" /></td><td>The root of the MQTT topic. Must end with /.     </td></tr>
      <tr><td>User:      </td><td><input name="user"          value="%user%" onchange="document.getElementById('saveButton').disabled = false;" />     </td><td>This is the userid for MQTT. Leave blank if none.</td></tr>
      <tr><td>Password:  </td><td><input name="pass"          value="%pass%" onchange="document.getElementById('saveButton').disabled = false;" />     </td><td>The password for the above user.                 </td></tr>
      </table>

    <h2>Controls</h2>
    <table border="0">
      <tr><td>Debug Flag:     </td><td><input type="checkbox" name="debug" value="1" %debugChecked% onchange="document.getElementById('saveButton').disabled = false;" /></td><td>If checked, prints diagnostic info to the serial port.</td></tr>
      <tr><td>Report Interval:</td><td><input name="reportinterval" value="%reportinterval%" onchange="document.getElementById('saveButton').disabled = false;" />     </td><td>How often in seconds to issue a status report. Processor will sleep between checks.</td></tr>
      <tr><td>MDNS Name:      </td><td><input name="mdnsname" value="%mdnsname%" onchange="document.getElementById('saveButton').disabled = false;" />     </td><td>Use this name followed by ".local" to access this web page (e.g., mousetrap.local)</td></tr>
      </table>

    <h2>Monitored Ports</h2>
    <table border="0">
      <tr>
        <th align="left">&nbsp;&#x2713;</th>
        <th align="left">GPIO# </th>
        <th align="left">Topic Suffix (High)</th>
        <th align="left">Topic Suffix (Low)</th>
        <th align="left" width="50&percnt;">Notes</th>
        </tr>
      <tr>
        <td align="left"><input type="checkbox" name="useGpio0" value="1" %gpio0Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;0 (D3)</td>
        <td align="left"><input name="gpio0highval" value="%gpio0highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio0lowval" value="%gpio0lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Must be HIGH for normal boot.</td>
        </tr>
      <tr>
        <td align="left"><input type="checkbox" name="useGpio1" value="1" %gpio1Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;1 (TX)</td>
        <td align="left"><input name="gpio1highval" value="%gpio1highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio1lowval" value="%gpio1lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Used for serial TX. Must be HIGH for normal boot. Logic must be modified if using this port.</td>
        </tr>
      <tr>
        <td align="left"><input type="checkbox" name="useGpio2" value="1" %gpio2Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;2 (D4)</td>
        <td align="left"><input name="gpio2highval" value="%gpio2highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio2lowval" value="%gpio2lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Must be HIGH for normal boot. Connected to built-in LED.</td>
        </tr>
      <tr>
        <td align="left"><input type="checkbox" name="useGpio3" value="1" %gpio3Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;3 (RX)</td>
        <td align="left"><input name="gpio3highval" value="%gpio3highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio3lowval" value="%gpio3lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Used for serial receive. Logic must be modified if using this port. See comments in code.</td>
        </tr>
      <tr>
        <td align="left"><input type="checkbox" name="useGpio4" value="1" %gpio4Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;4 (D2)</td>
        <td align="left"><input name="gpio4highval" value="%gpio4highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio4lowval" value="%gpio4lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Also used as default I2C SCL (clock).</td>
        </tr>
       <tr>
        <td align="left"><input type="checkbox" name="useGpio5" value="1" %gpio5Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;5 (D1)</td>
        <td align="left"><input name="gpio5highval" value="%gpio5highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio5lowval" value="%gpio5lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Also used as default I2C SDA (data).</td>
        </tr>
       <tr>
        <td align="left"><input type="checkbox" name="useGpio12" value="1" %gpio12Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;12 (D6)</td>
        <td align="left"><input name="gpio12highval" value="%gpio12highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio12lowval" value="%gpio12lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Also used as default SPI MISO.</td>
        </tr>
       <tr>
        <td align="left"><input type="checkbox" name="useGpio13" value="1" %gpio13Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;13 (D7)</td>
        <td align="left"><input name="gpio13highval" value="%gpio13highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio13lowval" value="%gpio13lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Also used as default SPI MOSI.</td>
        </tr>
       <tr>
        <td align="left"><input type="checkbox" name="useGpio14" value="1" %gpio14Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;14 (D5)</td>
        <td align="left"><input name="gpio14highval" value="%gpio14highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio14lowval" value="%gpio14lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Also used as default SPI SCK.</td>
        </tr>
       <tr>
        <td align="left"><input type="checkbox" name="useGpio15" value="1" %gpio15Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;15 (D8)</td>
        <td align="left"><input name="gpio15highval" value="%gpio15highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio15lowval" value="%gpio15lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Must be low when booting. Also used as default SPI CS.</td>
        </tr>
       <tr>
        <td align="left"><input type="checkbox" name="useGpio16" value="1" %gpio16Checked% onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td>&nbsp;16 (D0)</td>
        <td align="left"><input name="gpio16highval" value="%gpio16highval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left"><input name="gpio16lowval" value="%gpio16lowval%" onchange="document.getElementById('saveButton').disabled = false;" /></td>
        <td align="left">Used to wake up CPU from deep sleep when tied to the reset line.</td>
        </tr>
     </table>
    <br>
    <table cellspacing="15" border="0">
      <tr><td align="center"><button id="saveButton" type="submit" disabled>Save</button></td><td><font color="green">%message%</font></td></tr>
      </table>


    </form>
  </body>
</html>
